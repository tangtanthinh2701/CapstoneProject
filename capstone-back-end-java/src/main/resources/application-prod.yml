# =====================================================
# PRODUCTION PROFILE - application-prod.yml
# =====================================================
# Activate with: java -jar app.jar --spring.profiles.active=prod
# Or set environment: SPRING_PROFILES_ACTIVE=prod
# 
# SECURITY: All sensitive values should be set via environment variables!

server:
  port: ${SERVER_PORT:8080}

spring:
  # Production PostgreSQL Database (use environment variables!)
  datasource:
    url: ${DATABASE_URL:jdbc:postgresql://localhost:5432/carbon_market_prod}
    driver-class-name: org.postgresql.Driver
    username: ${DATABASE_USERNAME:postgres}
    password: ${DATABASE_PASSWORD:}
    hikari:
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 30000
  
  # JPA/Hibernate - Production settings
  jpa:
    show-sql: false
    hibernate:
      ddl-auto: none  # NEVER use update/create in production!
    properties:
      hibernate:
        format_sql: false
  
  # Email - Production SMTP
  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

# Logging - Less verbose for production
logging:
  level:
    root: WARN
    org.springframework.security: WARN
    com.capston.project.back.end: INFO
    org.hibernate.SQL: OFF

# VNPay Production
vnpay:
  pay-url: ${VNPAY_PAY_URL:https://pay.vnpay.vn/}
  return-url: ${VNPAY_RETURN_URL:https://your-domain.com/api/payments/vnpay-return}
  ipn-url: ${VNPAY_IPN_URL:https://your-domain.com/api/payments/vnpay-ipn}
  tmn-code: ${VNPAY_TMN_CODE:}
  hash-secret: ${VNPAY_HASH_SECRET:}

# External APIs - Use real APIs in production
geocoding:
  use-mock: false
weather:
  use-mock: false
soil:
  use-mock: false

# GitHub Models - Production Token (set via environment variable!)
github:
  models:
    api:
      token: ${GITHUB_MODELS_TOKEN:}
      url: ${GITHUB_MODELS_URL:https://models.github.ai/inference/chat/completions}
    model: ${GITHUB_MODELS_MODEL:openai/gpt-4o}

# Production Security Headers
server.servlet.session:
  cookie:
    secure: true
    http-only: true
